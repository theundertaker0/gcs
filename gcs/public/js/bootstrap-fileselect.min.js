/*!
 * Bootstrap Fileselect v2.0.0
 * https://github.com/Neoflow/Bootstrap-Fileselect
 *
 * Copyright 2016-2017 Neoflow
 *
 * Released under the MIT license
 * https://github.com/Neoflow/Bootstrap-Fileselect/blob/master/LICENSE.md
 */
!function(i,t){var e=function(i,e){this.$fileInput=t(i),this.options=e,this.userLanguage="en",this.$fileselect=t(this),this.metadata=this.$fileInput.data(),this.$inputGroup=t("<div>").addClass("input-group"),this.$inputGroupBtn=t("<label>").addClass("input-group-btn"),this.$browseBtn=t("<span>"),this.$labelInput=t("<input>").attr("type","text").attr("readonly",!0).addClass("form-control"),this.translations={en:{browse:"Browse",rules:{numberOfFiles:"The number of uploadable files is limited to [num] file(s)",fileExtensions:"The files are restricted to following file extensions: [ext]",fileSize:"The file size is limited to [size]"}},de:{browse:"Durchsuchen",rules:{numberOfFiles:"Die Anzahl der hochladbaren Dateien ist limitiert auf [num] Datei(en)",fileExtensions:"Die Dateien sind eingeschränkt auf folgende Dateierweiterungen: [ext]",fileSize:"Die Grösse ist eingeschränkt auf [size] pro Datei"}}},this.init()};e.prototype={defaults:{browseBtnClass:"btn btn-primary",browserBtnPosition:"right",limit:!1,extensions:!1,allowedFileSize:!1,allowedFileExtensions:!1,allowedNumberOfFiles:!1,language:!1,validationCallback:function(i,t){alert(i)}},init:function(){return this.config=this.loadConfig(),this.translations=this.loadTranslation(),this.$fileInput.hide().after(this.$inputGroup),"left"===this.config.browseBtnPosition?this.$inputGroup.append(this.$inputGroupBtn,this.$labelInput):this.$inputGroup.append(this.$labelInput,this.$inputGroupBtn),this.$inputGroupBtn.append(this.$browseBtn).append(this.$fileInput).css("margin-bottom",0),this.$browseBtn.addClass(this.config.browseBtnClass).text(this.translations.browse),this.$fileInput.on("change",t.proxy(this.changeEvent,this)),t(this)},changeEvent:function(i){this.$fileInput.trigger("bs.fs.change",[this]);var e=this.$fileInput[0].files,s=t.map(e,function(i){return i.name}).join(", "),n=!1;return this.validateNumberOfFiles(e)&&this.valiateFileExtensions(e)&&this.validateFileSize(e)?(this.$labelInput.val(s),n=!0):this.$fileInput.val(null),this.$fileInput.trigger("bs.fs.changed",[this]),n},loadConfig:function(){var i=t.extend({},this.defaults,this.options,this.metadata);return"string"==typeof i.allowedFileExtensions&&(i.allowedFileExtensions=i.allowedFileExtensions.split(",")),i},loadTranslation:function(){var i=this.config.language||navigator.language||navigator.userLanguage,e=t.map(this.translations,function(i,t){return t});return t.inArray(i,e)>=0?this.userLanguage=i:console.warn("Current user language has no translation. Switched to english as default language."),this.translations[i]},validateNumberOfFiles:function(i){this.$fileInput.trigger("bs.fs.validate",[this]).trigger("bs.fs.number-of-files-validate",[this]);var t=!0;return this.config.allowedNumberOfFiles&&i.length>parseInt(this.config.allowedNumberOfFiles)&&(this.config.validationCallback(this.translations.rules.numberOfFiles.replace("[num]",this.config.allowedNumberOfFiles),"allowedNumberOfFiles",this),t=!1),this.$fileInput.trigger("bs.fs.validated",[this]).trigger("bs.fs.number-of-files-validated",[this]),t},valiateFileExtensions:function(i){this.$fileInput.trigger("bs.fs.validate",[this]).trigger("bs.fs.file-extensions-validate",[this]);var e=!0;return this.config.allowedFileExtensions&&t.each(i,t.proxy(function(i,s){var n=s.name.replace(/^.*\./,"").toLowerCase();if(-1===t.inArray(n,this.config.allowedFileExtensions))return this.config.validationCallback(this.translations.rules.fileExtensions.replace("[ext]",this.config.allowedFileExtensions.join(", ")),"allowedFileExtensions",this),void(e=!1)},this)),this.$fileInput.trigger("bs.fs.validated",[this]).trigger("bs.fs.file-extensions-validated",[this]),e},validateFileSize:function(i){this.$fileInput.trigger("bs.fs.validate",[this]).trigger("bs.fs.file-size-validate",[this]);var e=!0;return this.config.allowedFileSize&&t.each(i,t.proxy(function(i,t){if(t.size>this.config.allowedFileSize)return this.config.validationCallback(this.translations.rules.fileSize.replace("[size]",Math.round(this.config.allowedFileSize/1024/1024)+"MB"),"allowedFileSize",this),void(e=!1)},this)),this.$fileInput.trigger("bs.fs.validated",[this]).trigger("bs.fs.file-size-validated",[this]),e}},e.defaults=e.prototype.defaults,t.fn.fileselect=function(i){return this.each(function(){new e(this,i)}),this},i.Fileselect=e}(window,jQuery);